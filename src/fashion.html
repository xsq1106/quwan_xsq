<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="css/fashion.css">
    <link rel="stylesheet" href="iconfont/iconfont.css">
    <style>
        #temp {
            display: none;
        }
    </style>
</head>

<body>
    <header>
        <div id="headTop">
            <div class="headTop-con">
                <span class="headTopTitle">好的生活，没那么贵</span>
                <div class="headTopRight">
                    <a href="login.html" class="login">登录</a>
                    <a href="register.html" class="register">注册</a>
                    <a href="">常见问题</a>
                    <a href="">联系我们</a>
                    <a href="">关于我们</a>
                    <a href="">客服服务</a>
                    <a href="">
                        <!-- <i class="iconfont icon-shouji"></i> -->
                        微信关注</a>
                </div>
            </div>

        </div>
        <div id="headMid">
            <div class="headMid-con">
                <a href="" class="logo">
                    <img src="images/logo.gif" alt="">
                </a>
                <div class="inputBox">
                    <input type="text" class="search" placeholder="输入商品关键词搜索">
                    <div class="searchFDJ">
                        <a href="">
                            <i class="iconfont icon-fangdajing
                            "></i>
                        </a>
                    </div>
                    <div class="searchGWC">
                        <a href="shopcart.html">
                            <i class="iconfont icon-gouwuche
                                "></i>
                            <i class="jiaobiao">0</i>
                        </a>
                    </div>
                </div>
                <div class="nav">
                    <li class="first">
                        <a href="index.html"> 首页</a>
                    </li>
                    <li>
                        <a href="fashion.html"> 数码家电</a>
                    </li>
                    <li>
                        <a href="fashion.html"> 居家生活</a>
                    </li>
                    <li>
                        <a href="fashion.html"> 个人护理</a>
                    </li>
                    <li>
                        <a href="fashion.html"> 时尚轻奢</a>
                    </li>
                    <li>
                        <a href="fashion.html"> 网红食品</a>
                    </li>
                </div>
            </div>

        </div>
    </header>
    <!-- 时尚奢品 -->
    <div id="fashion">
        <div class="fashion-con">
            <p class="lead">首页 &gt;时尚轻奢</p>
            <div class="fashion_body">
                <div class="fashion_sort">
                    <span class="sortTit">分类：</span>
                    <div class="sortGroup">
                        <span class="brands">Armani阿玛尼</span>
                        <span class="brands">DanielWellington</span>
                        <span class="brands">SWAROVSKI施华洛世奇</span>
                        <span class="brands">M.A.C魅可</span>
                        <span class="brands">CHARLESKEITH</span>
                        <span class="brands">兰蔻lancome</span>
                        <span class="brands">HKGOLD香港黄金</span>
                    </div>
                </div>
                <div class="fashion_sort">
                    <span class="sortBrands">品牌：</span>
                    <div class="sortBrandsGroup">
                        <span class="brands">M.A.C魅可</span>
                        <span class="brands">SWAROVSKI施华洛世奇</span>
                        <span class="brands">Armani阿玛尼</span>
                        <span class="brands">HKGOLD香港黄金</span>
                    </div>
                </div>
                <div class="fashion_sale">
                    <a href="">
                        <span> 销量</span>
                    </a>
                    <a href="">
                        <span> 价格</span>
                    </a>
                    <a href="">
                        <span> 上架时间</span>
                    </a>
                </div>
                <div class="fashion_goods">
                    <div class="fashion_goods_con">
                        <ul class="goodsGroup">
                            <li class="fashion_item" id="temp">
                                <div class="item_project">
                                    <div class="item_img">
                                        <a href="detilPage.html">
                                            <img src="" alt="">
                                        </a>
                                    </div>
                                    <div class="item_font">
                                        <div class="blank"></div>
                                        <h4>
                                            <span class="goodsname">11</span>
                                        </h4>
                                        <p class="price">11</p>
                                        <hr>
                                    </div>
                                </div>
                            </li>

                        </ul>
                    </div>
                    <div class="nosearch" style="display: none">
                        <div class="nosearch_img">
                            <img src="images/zhaobudao.jpg" alt="">
                        </div>
                        <span>抱歉！我们努力也没有找到您想要的结果……</span>
                    </div>
                </div>
                <!-- <div class="page">
                    <ul>
                        <li>
                            <span>1</span>
                            <a href="">2</a>
                            <a href="">3</a>
                            <a href="">下一页</a>
                        </li>
                    </ul>
                </div> -->
            </div>
        </div>
    </div>

    <div id="contact">
        <div id="contact-con">
            <div class="contact_item">
                <h4>客服电话</h4>
                <p class="telephone">028-65292690</p>
                <p class="datetime">9:00-18:00</p>
                <a href="" class="btn">用户反馈</a>
                <a href="" class="btn">在线客服</a>
            </div>
            <div class="contact_item">
                <h4>趣玩简介</h4>
                <p class="desc">趣玩网，成立于2008年11月。国内知名创意生活类用品零售平台及专业的新媒体电商运营服务商。</p>
            </div>
            <div class="contact_item">
                <h4>微信扫一扫关注我们</h4>
                <img src="images/code.jpg" alt="">
                <p class="codeFont">优惠减不停</p>
            </div>
        </div>
    </div>
    <div id="foot">
        <div id="foot-con">
            <ul class="promise">
                <li>
                    <p> 7天无忧退货</p>
                </li>
                <li>
                    <p> 全场免邮费</p>
                </li>
                <li>
                    <p> 趣玩品质保证</p>
                </li>
            </ul>
            <hr>
            <div class="foot_font">
                <div class="foot_nav">
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                    <li>免责条款 </li>
                </div>
                <p class="footP">© 2008-2021 趣玩 版权所有，并保留所有权利。 高新区孵化园德商国际B座1004 蜀ICP备14003947号-1</p>
            </div>
        </div>
    </div>
    <script src="js/jquery.min.js"></script>
    <script src="js/cookie.js"></script>
    <script>
        //-------是否登录--------//
        if (cookie.get("name") && cookie.get("pwd")) {
            // 若页面中有登录的cookie，则改变顶部的状态
            $(".login").html(cookie.get("name"))
            $(".register").html("退出登录")
            $(".login").attr("href", "personal.html")
            $(".register").attr("href", "index.html")
            $(".register").click(function () {
                cookie.del("name")
            })
        }


        let http = new XMLHttpRequest
        http.open("get", "http://192.168.31.110:8080/fashiongoods")
        http.send()
        http.onreadystatechange = function () {
            if (http.readyState === 4) {
                data = JSON.parse(http.responseText)
                console.log(data)
                data.forEach(item => {
                    let newItem = $("#temp").clone(true).attr("id", "")
                    newItem.find(".item_img").find("img").attr("src", "images/zhubao" + item.id + ".jpg")
                    $(".goodsGroup").append(newItem)
                    newItem.find(".goodsname").html(item.name)
                    newItem.find(".price").html("￥" + item.price)
                    newItem.addClass("newli")
                })
            }
        }
        $("body").click(function (event) {
            let _this = event.target
            if (_this.closest(".fashion_item") != null) {
                let nowli = _this.closest(".fashion_item")
                localStorage.setItem("goodsname", $(nowli).find(".goodsname").html())
                localStorage.setItem("price", $(nowli).find(".price").html())
                localStorage.setItem("bigImg", $(nowli).find(".item_img img").attr("src"))
            }
        })

        //-----------------点击分类----------------//
        $(".sortGroup").click(function (event) {
            let _this = event.target;
            if ($(_this).hasClass("brands")) {
                //品牌里的brand发生变化
                $(".sortBrandsGroup span").remove()
                $("<span></span>").appendTo(".sortBrandsGroup")
                let brand = $(_this).closest(".brands").html()
                $(".sortBrandsGroup span").html(brand)
                let http = new XMLHttpRequest
                http.open("get", `http://192.168.31.110:8080/fashiongoodsBrand?brands=${brand}`)
                http.send()
                http.onreadystatechange = function () {
                    if (http.readyState === 4) {
                        $(".newli").remove()
                        console.log(http.responseText)
                        if (http.responseText === "[]") {
                            console.log(11)
                            $(".nosearch")[0].style.display = "block"
                            $(".fashion_goods_con")[0].style.display = "none"
                        }
                        else {
                            console.log(22)
                            $(".nosearch")[0].style.display = "none"
                            $(".fashion_goods_con")[0].style.display = "block"
                            data = JSON.parse(http.responseText)
                            data.forEach(item => {
                                let newItem = $("#temp").clone(true).attr("id", "")
                                newItem.find(".item_img").find("img").attr("src", "images/zhubao" + item.id + ".jpg")
                                $(".goodsGroup").append(newItem)
                                newItem.find(".goodsname").html(item.name)
                                newItem.find(".price").html("￥" + item.price)
                                newItem.addClass("newli")
                            })
                        }

                    }
                }
            }
        })



        //-----------------搜索--------------------//
        $(".searchFDJ").click(function () {
            if ($(".search").val() === "") {
                alert("请在搜索框输入内容哦~")
            }
            else {
                localStorage.setItem("keyword", $(".search").val())
                $(".searchFDJ a").attr("href", "searchPage.html")
            }
        })
    </script>
</body>

</html>